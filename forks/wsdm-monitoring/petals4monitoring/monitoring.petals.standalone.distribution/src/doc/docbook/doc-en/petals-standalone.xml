<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
"http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">
<book lang="en">
  <bookinfo>
    <title>PEtALS Standalone Distribution</title>

    <authorgroup>
      <author>
        <firstname>Roland</firstname>

        <surname>NAUDIN</surname>

        <email>roland.naudin@ebmwebsourcing.com</email>
      </author>

      <author>
        <firstname>Christophe</firstname>

        <surname>HAMERLING</surname>

        <email>christophe.hamerling@ebmwebsourcing.com</email>
      </author>

      <corpauthor>PEtALS Team</corpauthor>
    </authorgroup>

    <legalnotice>
      <para>(CC) EBM WebSourcing - This work is licensed under the Creative
      Commons Attribution-NonCommercial-ShareAlike License. To view a copy of
      this license, visit
      http://creativecommons.org/licenses/by-nc-sa/3.0/</para>
    </legalnotice>

    <abstract>
      <para>This document is the user guide of the PEtALS standalone
      distribution. This release targets PEtALS users who want to build their
      services architecture on a centralized infrastructure</para>
    </abstract>

    <date>March 2009</date>
  </bookinfo>

  <preface>
    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/2/1)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/2/2)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/2/4)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/2/5)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <para>This distribution targets the usage of PEtALS in a centralized
    infrastructure. It provides security and transaction support. It permits
    various optimizations on data transfer and tuning on the administration
    and exploitation of your JBI environment.</para>
  </preface>

  <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
              xpointer="element(/1/3)"
              xmlns:xi="http://www.w3.org/2001/XInclude" />

  <chapter>
    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/4/1)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/4/2)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/4/3)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/4/4)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/4/5)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <section>
      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/4/6/1)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />

      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/4/6/2)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />

      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/4/6/3)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />

      <note>
        <para>Stopping PEtALS means to stop the running components and SAs
        without changing their life-cycle state. At your next start, the
        components and SAs would be recovered to their previous state.
        Shutting down PEtALS means to undeploy and uninstall all the
        components and SAs loaded in the container. It is useful to clean up
        your container.</para>
      </note>
    </section>
  </chapter>

  <chapter>
    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/5/1)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <section>
      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/5/2/1)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />

      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/5/2/2)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />

      <itemizedlist>
        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/1)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/2)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/3)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/4)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/5)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/7)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/8)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/9)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/10)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />

        <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                    xpointer="element(/1/5/2/3/11)"
                    xmlns:xi="http://www.w3.org/2001/XInclude" />
      </itemizedlist>
    </section>

    <section>
      <title>PEtALS topology - topology.xml</title>

      <para>In this distribution, you can define only one container. Here is
      the default configuration:</para>

      <screen>&lt;tns:topology xmlns:tns="http://petals.ow2.org/topology"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://petals.ow2.org/topology petalsTopology.xsd"&gt;
  &lt;tns:domain mode="standalone" name="PEtALS"&gt;
    &lt;tns:description&gt;standalone topology&lt;/tns:description&gt;
  
    &lt;!-- the internal jndi server is used by default
      &lt;tns:jndi&gt;
        &lt;tns:factory&gt;org.ow2.petals.communication.jndi.client.naming.NamingContextFactory&lt;/tns:factory&gt;
        &lt;tns:host&gt;host&lt;/tns:host&gt;
        &lt;tns:port&gt;0&lt;/tns:port&gt;
      &lt;/tns:jndi&gt;
    --&gt;

    &lt;tns:sub-domain name="subdomain1"&gt;
      &lt;tns:container name="0"&gt;
        &lt;tns:host&gt;localhost&lt;/tns:host&gt;
        &lt;tns:description&gt;description of the features of the Standalone container&lt;/tns:description&gt;
        &lt;tns:user&gt;petals&lt;/tns:user&gt;
        &lt;tns:password&gt;petals&lt;/tns:password&gt;
        &lt;tns:jmx-service&gt;
          &lt;tns:rmi-port&gt;7700&lt;/tns:rmi-port&gt;
        &lt;/tns:jmx-service&gt;
      &lt;/tns:container&gt;
    &lt;/tns:sub-domain&gt;
  &lt;/tns:domain&gt;
&lt;/tns:topology&gt;</screen>

      <para>The meaning of the domain and subdomain is not used in this
      distribution but only in platform distribution.</para>

      <para>PEtALS uses an internal JNDI directory. You can however configure
      PEtALS to connect to an external JNDI directory, to integrate it in your
      enterprise Information System. To do that, just uncomment the JNDI part
      and fill the parameters.</para>

      <variablelist>
        <varlistentry>
          <term>jndi</term>

          <listitem>
            <para>Optional.</para>

            <variablelist>
              <varlistentry>
                <term>factory</term>

                <listitem>
                  <para>The JNDI factory class name.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>host</term>

                <listitem>
                  <para>The host name or IP of the JNDI server.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>port</term>

                <listitem>
                  <para>The port to connect to the JNDI server.</para>
                </listitem>
              </varlistentry>
            </variablelist>
          </listitem>
        </varlistentry>
      </variablelist>

      <para>In the container section, the standalone needs only resources for
      its JMXService.</para>

      <variablelist>
        <varlistentry>
          <term>container</term>

          <listitem>
            <variablelist>
              <varlistentry>
                <term>host</term>

                <listitem>
                  <para>The host name or ip address of the container.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>description</term>

                <listitem>
                  <para>Optional. The description of the container.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>user</term>

                <listitem>
                  <para>The login name, used for JMX authentication.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>password</term>

                <listitem>
                  <para>The password, used for JMX authentication.</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>jmx-service</term>

                <listitem>
                  <para>The JMX service, used to manage MBean objects.</para>

                  <variablelist>
                    <varlistentry>
                      <term>rmi-port</term>

                      <listitem>
                        <para>The port used to by the JMX RMI connector. The
                        JMX Server would be reachable on this port at the URI
                        <uri>service:jmx:rmi:///jndi/rmi://host:rmiport/jmxRmiConnector</uri>.</para>
                      </listitem>
                    </varlistentry>
                  </variablelist>
                </listitem>
              </varlistentry>
            </variablelist>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/5/3)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/5/4)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/5/5)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />
  </chapter>

  <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/6)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

  <chapter>
    <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                xpointer="element(/1/7/1)"
                xmlns:xi="http://www.w3.org/2001/XInclude" />

    <section>
      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/7/2/1)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />

      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/7/2/2)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />

      <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
                  xpointer="element(/1/7/2/3)"
                  xmlns:xi="http://www.w3.org/2001/XInclude" />
    </section>
  </chapter>

  <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
              xpointer="element(/1/8)"
              xmlns:xi="http://www.w3.org/2001/XInclude" />

  <xi:include href="../../../../../src/doc/docbook/doc-en/petals-user-guide.xml"
              xpointer="element(/1/9)"
              xmlns:xi="http://www.w3.org/2001/XInclude" />
</book>
